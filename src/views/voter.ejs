<!DOCTYPE html>
<html lang="en">
    <% include partials/head %>
    <body>
        <div class="container">
            <div style="text-align: center">
                <h1 class="title" style="margin-bottom: 30px; padding-top: 3vh">Klik <%- data.title %> Pilihanmu!</h1>
            </div>
            <div class="columns" style="justify-content:center">
                <% data.candidates.forEach(name => { %>
                    <%- include('vote/card', {name}); %>
                <% }) %>
            </div>
        </div>
        <% include partials/footer %>
    </body>
    <script>
        const ipcRenderer = require('electron').ipcRenderer;
        const request = require('request');
        function updateClient(postData){
            var clientServerOptions = {
                uri: 'http://localhost:7000/vote',
                body: JSON.stringify(postData),
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            }
            request(clientServerOptions, function (error, response) {
                console.log(error,response);
                return;
            });
        }
        let choose = (modalId) => {
            console.log("aaa"+modalId);
            document.querySelector(`#${modalId}`).style.display = 'block';
        }
        let closeModal = (modalId) => {
            document.querySelector(`#${modalId}`).style.display = 'none';
        }
        let vote = (type,candidate_no,nim) =>{
            console.log(candidate_no);
            ipcRenderer.send("voted", {"type":type,
                "candidate_no":candidate_no});
            closeModal('notif-'+nim);
        }

        ipcRenderer.on('castVoteReply',function (event,status,errmsg) {
            // TODO UI - give feedback to user and return to main
            if(status){
                console.log("success vote");
            }else{
                console.log("error vote");
            }
        });
    </script>
</html>